require("pubsub")

PubSub.join('general', (message, uuid) => {
    if (message) console.log(`${uuid} recived message`, message);

    setTimeout(() => {
      PubSub
          .leave('general', uuid)
          .then(() => console.log('left general'));
    }, 2000);
});

PubSub
    .publish('general', {test: 'passed'})
    .then(() => console.log('successfully sent message'));

PubSub.setFlag('historyEnabled', true);

console.log(
  'History from general channel',
  PubSub.history('general', 10),
);
